DEBUG: upload_flow: Arquivo comprovante3.pdf recebido em: D:\Sidnei\automatopagamento_back_front\arquivos\comprovante3.pdf
DEBUG: process_file_flow: DEBUG: INICIO processFile para: comprovante3.pdf
DEBUG: comprovante3.pdf: DEBUG: Iniciando processFile para: comprovante3.pdf
DEBUG: comprovante3.pdf: DEBUG: Antes de verificar existingTransaction para comprovante3.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions WHERE filename = ?... with params: ["comprovante3.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[],[{"_buf":{"type":"Buffer","data":[1,0,0,1,15,73,0,0,2,3,100,101,102,15,117,108,105,97,110,97,101...
DEBUG: comprovante3.pdf: DEBUG: existingTransaction para comprovante3.pdf: false
DEBUG: comprovante3.pdf: DEBUG: Antes de verificar existingUnprocessedFile para comprovante3.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?... with params: ["comprovante3.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"count":0}],[{"_buf":{"type":"Buffer","data":[1,0,0,1,1,27,0,0,2,3,100,101,102,0,0,0,5,99,111,117...
DEBUG: comprovante3.pdf: DEBUG: existingUnprocessedFile para comprovante3.pdf: false
DEBUG: comprovante3.pdf: DEBUG: File extension for comprovante3.pdf: .pdf
DEBUG: comprovante3.pdf: DEBUG: Calling processPDF for comprovante3.pdf
DEBUG: comprovante3.pdf: DEBUG: processPDF returned for comprovante3.pdf. Extracted text length: 693
DEBUG: comprovante3.pdf: DEBUG: extractedText para comprovante3.pdf (após extração/recuperação): true
DEBUG: comprovante3.pdf: DEBUG: Entering extractedText block for comprovante3.pdf.
DEBUG: comprovante3.pdf: DEBUG: Texto extraído/recuperado de comprovante3.pdf:
{
  "text": "\n\nComprovantedeenvioPix\nValorR$40,00\n01/08/2025às14:27\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescriçãoMensalidadeAgosto2025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202508011726QcaPwxZGbmd\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044",
  "pages": 1,
  "info": {
    "PDFFormatVersion": "1.7",
    "IsAcroFormPresent": false,
    "IsXFAPresent": false
  }
}...
DEBUG: comprovante3.pdf: DEBUG: Calling parsePixData for comprovante3.pdf with text length: 529
DEBUG: comprovante3.pdf: DEBUG: Normalized Text (start of parsePixData):  comprovantedeenviopix valorr$40,00 01/08/2025às14:27 de sidneiuliana cpf/cnpj***.567.038-** instituiçãobancobmgs/a para luizaugustodasilva cpf/cnpj***.881.268-** instituiçãoitaúunibancos.a. descriçãomensalidadeagosto2025 canalaplicativobmg iddatransaçãoe61186680202508011726qcapwxzgbmd centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria ...
DEBUG: comprovante3.pdf: DEBUG: Attempting to extract value.
DEBUG: comprovante3.pdf: DEBUG: Value found via R$: 40
DEBUG: comprovante3.pdf: DEBUG: Date extracted: 01/08/2025
DEBUG: comprovante3.pdf: DEBUG: Destinatario found: luizaugustodasilva
DEBUG: comprovante3.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)(?:\s+da)?\s+transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante3.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante3.pdf: DEBUG: General idTransacao match for pattern /transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante3.pdf: DEBUG: General idTransacao match for pattern /protocolo\s+([a-zA-Z0-9\-]+)/i: null
DEBUG: comprovante3.pdf: DEBUG: idTransacao after general extraction: null
DEBUG: comprovante3.pdf: DEBUG: Detectado comprovante do Banco BMG. Iniciando extração específica...
DEBUG: comprovante3.pdf: DEBUG: Valor (BMG) encontrado: 40
DEBUG: comprovante3.pdf: DEBUG: dateTimeBmgMatch (BMG): ["01/08/2025às14:27","01/08/2025","14:27"]
DEBUG: comprovante3.pdf: DEBUG: Data (BMG) encontrada: 01/08/2025
DEBUG: comprovante3.pdf: DEBUG: Hora (BMG) encontrada: 14:27
DEBUG: comprovante3.pdf: DEBUG: Banco (BMG) encontrado: Banco BMG
DEBUG: comprovante3.pdf: DEBUG: pagadorBmgMatch (BMG): ["de sidneiuliana cpf/cnpj","sidneiuliana "]
DEBUG: comprovante3.pdf: DEBUG: Pagador (BMG) encontrado: sidneiuliana
DEBUG: comprovante3.pdf: DEBUG: idTransacaoBmgMatch (BMG): ["iddatransaçãoe61186680202508011726qcapwxzgbmd","e61186680202508011726qcapwxzgbmd"]
DEBUG: comprovante3.pdf: DEBUG: pixData generated for comprovante3.pdf: {"valor":40,"destinatario":"luizaugustodasilva","chavePix":"61186680202","data":"01/08/2025","hora":"14:27","idTransacao":"e61186680202508011726qcapwxzgbmd","banco":"Banco BMG","tipoChave":"CPF","status":null,"observacoes":"mensalidadeagosto2025 canalaplicativobmg iddatransaçãoe61186680202508011726qcapwxzgbmd centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","pagador":"sidneiuliana","pagadorBanco":null}
DEBUG: comprovante3.pdf: DEBUG: Antes do bloco de decisão save/update para comprovante3.pdf.
DEBUG: comprovante3.pdf: DEBUG: Reached save/update decision for comprovante3.pdf.
DEBUG: comprovante3.pdf: DEBUG: isFullyProcessed condition for comprovante3.pdf: e61186680202508011726qcapwxzgbmd
DEBUG: comprovante3.pdf: DEBUG: pixData.data: 01/08/2025, pixData.valor: 40, pixData.destinatario: luizaugustodasilva, pixData.banco: Banco BMG, pixData.pagador: sidneiuliana, pixData.idTransacao: e61186680202508011726qcapwxzgbmd
DEBUG: comprovante3.pdf: DEBUG: Condição de processamento completo atendida para comprovante3.pdf.
DEBUG: comprovante3.pdf: DEBUG: Attempting to save new Pix transaction for comprovante3.pdf
DEBUG: comprovante3.pdf: DEBUG: savePixTransaction called.
DEBUG: comprovante3.pdf: DEBUG: pixData desestruturado com sucesso.
DEBUG: comprovante3.pdf: DEBUG: savePixTransaction - filename: comprovante3.pdf
DEBUG: comprovante3.pdf: DEBUG: savePixTransaction - valor: 40
DEBUG: comprovante3.pdf: DEBUG: savePixTransaction - destinatario: luizaugustodasilva
DEBUG: comprovante3.pdf: DEBUG: savePixTransaction - pagador: sidneiuliana
DEBUG: comprovante3.pdf: DEBUG: tableName determinado como: pix_transactions
DEBUG: comprovante3.pdf: DEBUG: SQL Query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferencia,
      hora_transferencia, banco, tipo_chave, status, id_transacao,
      observacoes, extracted_text, pagador
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  
DEBUG: comprovante3.pdf: DEBUG: SQL Values: ["comprovante3.pdf",40,"luizaugustodasilva","61186680202","2025-08-01","14:27","Banco BMG","CPF",null,"e61186680202508011726qcapwxzgbmd","mensalidadeagosto2025 canalaplicativobmg iddatransaçãoe61186680202508011726qcapwxzgbmd centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","\n\nComprovantedeenvioPix\nValorR$40,00\n01/08/2025às14:27\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescriçãoMensalidadeAgosto2025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202508011726QcaPwxZGbmd\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044","sidneiuliana"]
DEBUG: comprovante3.pdf: DEBUG: About to execute SQL query for pix_transactions.
DEBUG: database_query: DEBUG: Query function called with SQL: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc...
DEBUG: database_query: DEBUG: Executing query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc... with params: ["comprovante3.pdf",40,"luizaugustodasilva","61186680202","2025-08-01","14:27","Banco BMG","CPF",nul...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [{"fieldCount":0,"affectedRows":1,"insertId":36,"info":"","serverStatus":2,"warningStatus":0,"change...
DEBUG: comprovante3.pdf: DEBUG: Dados salvos no banco para: comprovante3.pdf
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":36,"filename":"comprovante3.pdf","valor":"40.00","destinatario":"luizaugustodasilva","chave_...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":36,"filename":"comprovante3.pdf","valor":"40.00","destinatario":"luizaugustodasilva","chave_...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":36,"filename":"comprovante3.pdf","valor":"40.00","destinatario":"luizaugustodasilva","chave_...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":36,"filename":"comprovante3.pdf","valor":"40.00","destinatario":"luizaugustodasilva","chave_...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: upload_flow: Arquivo comprovante0410.pdf recebido em: D:\Sidnei\automatopagamento_back_front\arquivos\comprovante0410.pdf
DEBUG: process_file_flow: DEBUG: INICIO processFile para: comprovante0410.pdf
DEBUG: comprovante0410.pdf: DEBUG: Iniciando processFile para: comprovante0410.pdf
DEBUG: comprovante0410.pdf: DEBUG: Antes de verificar existingTransaction para comprovante0410.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions WHERE filename = ?... with params: ["comprovante0410.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[],[{"_buf":{"type":"Buffer","data":[1,0,0,1,15,73,0,0,2,3,100,101,102,15,117,108,105,97,110,97,101...
DEBUG: comprovante0410.pdf: DEBUG: existingTransaction para comprovante0410.pdf: false
DEBUG: comprovante0410.pdf: DEBUG: Antes de verificar existingUnprocessedFile para comprovante0410.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?... with params: ["comprovante0410.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"count":0}],[{"_buf":{"type":"Buffer","data":[1,0,0,1,1,27,0,0,2,3,100,101,102,0,0,0,5,99,111,117...
DEBUG: comprovante0410.pdf: DEBUG: existingUnprocessedFile para comprovante0410.pdf: false
DEBUG: comprovante0410.pdf: DEBUG: File extension for comprovante0410.pdf: .pdf
DEBUG: comprovante0410.pdf: DEBUG: Calling processPDF for comprovante0410.pdf
DEBUG: comprovante0410.pdf: DEBUG: processPDF returned for comprovante0410.pdf. Extracted text length: 678
DEBUG: comprovante0410.pdf: DEBUG: extractedText para comprovante0410.pdf (após extração/recuperação): true
DEBUG: comprovante0410.pdf: DEBUG: Entering extractedText block for comprovante0410.pdf.
DEBUG: comprovante0410.pdf: DEBUG: Texto extraído/recuperado de comprovante0410.pdf:
{
  "text": "\n\nComprovantedeenvioPix\nValorR$20,00\n04/10/2025às20:06\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescrição082025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202510042305SSGQnvMuu7w\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044",
  "pages": 1,
  "info": {
    "PDFFormatVersion": "1.7",
    "IsAcroFormPresent": false,
    "IsXFAPresent": false
  }
}...
DEBUG: comprovante0410.pdf: DEBUG: Calling parsePixData for comprovante0410.pdf with text length: 514
DEBUG: comprovante0410.pdf: DEBUG: Normalized Text (start of parsePixData):  comprovantedeenviopix valorr$20,00 04/10/2025às20:06 de sidneiuliana cpf/cnpj***.567.038-** instituiçãobancobmgs/a para luizaugustodasilva cpf/cnpj***.881.268-** instituiçãoitaúunibancos.a. descrição082025 canalaplicativobmg iddatransaçãoe61186680202510042305ssgqnvmuu7w centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18...
DEBUG: comprovante0410.pdf: DEBUG: Attempting to extract value.
DEBUG: comprovante0410.pdf: DEBUG: Value found via R$: 20
DEBUG: comprovante0410.pdf: DEBUG: Date extracted: 04/10/2025
DEBUG: comprovante0410.pdf: DEBUG: Destinatario found: luizaugustodasilva
DEBUG: comprovante0410.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)(?:\s+da)?\s+transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante0410.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante0410.pdf: DEBUG: General idTransacao match for pattern /transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante0410.pdf: DEBUG: General idTransacao match for pattern /protocolo\s+([a-zA-Z0-9\-]+)/i: null
DEBUG: comprovante0410.pdf: DEBUG: idTransacao after general extraction: null
DEBUG: comprovante0410.pdf: DEBUG: Detectado comprovante do Banco BMG. Iniciando extração específica...
DEBUG: comprovante0410.pdf: DEBUG: Valor (BMG) encontrado: 20
DEBUG: comprovante0410.pdf: DEBUG: dateTimeBmgMatch (BMG): ["04/10/2025às20:06","04/10/2025","20:06"]
DEBUG: comprovante0410.pdf: DEBUG: Data (BMG) encontrada: 04/10/2025
DEBUG: comprovante0410.pdf: DEBUG: Hora (BMG) encontrada: 20:06
DEBUG: comprovante0410.pdf: DEBUG: Banco (BMG) encontrado: Banco BMG
DEBUG: comprovante0410.pdf: DEBUG: pagadorBmgMatch (BMG): ["de sidneiuliana cpf/cnpj","sidneiuliana "]
DEBUG: comprovante0410.pdf: DEBUG: Pagador (BMG) encontrado: sidneiuliana
DEBUG: comprovante0410.pdf: DEBUG: idTransacaoBmgMatch (BMG): ["iddatransaçãoe61186680202510042305ssgqnvmuu7w","e61186680202510042305ssgqnvmuu7w"]
DEBUG: comprovante0410.pdf: DEBUG: pixData generated for comprovante0410.pdf: {"valor":20,"destinatario":"luizaugustodasilva","chavePix":"61186680202","data":"04/10/2025","hora":"20:06","idTransacao":"e61186680202510042305ssgqnvmuu7w","banco":"Banco BMG","tipoChave":"CPF","status":null,"observacoes":"082025 canalaplicativobmg iddatransaçãoe61186680202510042305ssgqnvmuu7w centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","pagador":"sidneiuliana","pagadorBanco":null}
DEBUG: comprovante0410.pdf: DEBUG: Antes do bloco de decisão save/update para comprovante0410.pdf.
DEBUG: comprovante0410.pdf: DEBUG: Reached save/update decision for comprovante0410.pdf.
DEBUG: comprovante0410.pdf: DEBUG: isFullyProcessed condition for comprovante0410.pdf: e61186680202510042305ssgqnvmuu7w
DEBUG: comprovante0410.pdf: DEBUG: pixData.data: 04/10/2025, pixData.valor: 20, pixData.destinatario: luizaugustodasilva, pixData.banco: Banco BMG, pixData.pagador: sidneiuliana, pixData.idTransacao: e61186680202510042305ssgqnvmuu7w
DEBUG: comprovante0410.pdf: DEBUG: Condição de processamento completo atendida para comprovante0410.pdf.
DEBUG: comprovante0410.pdf: DEBUG: Attempting to save new Pix transaction for comprovante0410.pdf
DEBUG: comprovante0410.pdf: DEBUG: savePixTransaction called.
DEBUG: comprovante0410.pdf: DEBUG: pixData desestruturado com sucesso.
DEBUG: comprovante0410.pdf: DEBUG: savePixTransaction - filename: comprovante0410.pdf
DEBUG: comprovante0410.pdf: DEBUG: savePixTransaction - valor: 20
DEBUG: comprovante0410.pdf: DEBUG: savePixTransaction - destinatario: luizaugustodasilva
DEBUG: comprovante0410.pdf: DEBUG: savePixTransaction - pagador: sidneiuliana
DEBUG: comprovante0410.pdf: DEBUG: tableName determinado como: pix_transactions
DEBUG: comprovante0410.pdf: DEBUG: SQL Query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferencia,
      hora_transferencia, banco, tipo_chave, status, id_transacao,
      observacoes, extracted_text, pagador
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  
DEBUG: comprovante0410.pdf: DEBUG: SQL Values: ["comprovante0410.pdf",20,"luizaugustodasilva","61186680202","2025-10-04","20:06","Banco BMG","CPF",null,"e61186680202510042305ssgqnvmuu7w","082025 canalaplicativobmg iddatransaçãoe61186680202510042305ssgqnvmuu7w centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","\n\nComprovantedeenvioPix\nValorR$20,00\n04/10/2025às20:06\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescrição082025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202510042305SSGQnvMuu7w\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044","sidneiuliana"]
DEBUG: comprovante0410.pdf: DEBUG: About to execute SQL query for pix_transactions.
DEBUG: database_query: DEBUG: Query function called with SQL: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc...
DEBUG: database_query: DEBUG: Executing query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc... with params: ["comprovante0410.pdf",20,"luizaugustodasilva","61186680202","2025-10-04","20:06","Banco BMG","CPF",...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [{"fieldCount":0,"affectedRows":1,"insertId":37,"info":"","serverStatus":2,"warningStatus":0,"change...
DEBUG: comprovante0410.pdf: DEBUG: Dados salvos no banco para: comprovante0410.pdf
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luizaugustodasilva","cha...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luizaugustodasilva","cha...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luiz augusto da silva","...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luiz augusto da silva","...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luiz augusto da silva","...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":37,"filename":"comprovante0410.pdf","valor":"20.00","destinatario":"luiz augusto da silva","...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: upload_flow: Arquivo comprovante122025.pdf recebido em: D:\Sidnei\automatopagamento_back_front\arquivos\comprovante122025.pdf
DEBUG: process_file_flow: DEBUG: INICIO processFile para: comprovante122025.pdf
DEBUG: comprovante122025.pdf: DEBUG: Iniciando processFile para: comprovante122025.pdf
DEBUG: comprovante122025.pdf: DEBUG: Antes de verificar existingTransaction para comprovante122025.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions WHERE filename = ?... with params: ["comprovante122025.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[],[{"_buf":{"type":"Buffer","data":[1,0,0,1,15,73,0,0,2,3,100,101,102,15,117,108,105,97,110,97,101...
DEBUG: comprovante122025.pdf: DEBUG: existingTransaction para comprovante122025.pdf: false
DEBUG: comprovante122025.pdf: DEBUG: Antes de verificar existingUnprocessedFile para comprovante122025.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?... with params: ["comprovante122025.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"count":0}],[{"_buf":{"type":"Buffer","data":[1,0,0,1,1,27,0,0,2,3,100,101,102,0,0,0,5,99,111,117...
DEBUG: comprovante122025.pdf: DEBUG: existingUnprocessedFile para comprovante122025.pdf: false
DEBUG: comprovante122025.pdf: DEBUG: File extension for comprovante122025.pdf: .pdf
DEBUG: comprovante122025.pdf: DEBUG: Calling processPDF for comprovante122025.pdf
DEBUG: comprovante122025.pdf: DEBUG: processPDF returned for comprovante122025.pdf. Extracted text length: 735
DEBUG: comprovante122025.pdf: DEBUG: extractedText para comprovante122025.pdf (após extração/recuperação): true
DEBUG: comprovante122025.pdf: DEBUG: Entering extractedText block for comprovante122025.pdf.
DEBUG: comprovante122025.pdf: DEBUG: Texto extraído/recuperado de comprovante122025.pdf:
{
  "text": "\n\nComprovantePix\nR$20,00\n01/12/2025às09:45viaAplicativoBmg\nPara\nLuizAugustodaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nChave\nluizaugustodasilva352@gmail.com\nDe\nSidneiUliana\nCPF/CNPJ***.567.038-**\nAgência44\nConta7974458-6\nInstituiçãoBancoBmgS/A\nDescriçãoDezembro2025\nIDdaTransaçãoE61186680202512011244eDMz9oKMx0q\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044",
  "pages": 1,
  "info": {
    "PDFFormatVersion": "1.7",
    "IsAcroFormPresent": false,
    "IsXFAPresent": false
  }
}...
DEBUG: comprovante122025.pdf: DEBUG: Calling parsePixData for comprovante122025.pdf with text length: 568
DEBUG: comprovante122025.pdf: DEBUG: Normalized Text (start of parsePixData):  comprovantepix r$20,00 01/12/2025às09:45viaaplicativobmg para luizaugustodasilva cpf/cnpj***.881.268-** instituiçãoitaúunibancos.a. chave luizaugustodasilva352@gmail.com de sidneiuliana cpf/cnpj***.567.038-** agência44 conta7974458-6 instituiçãobancobmgs/a descriçãodezembro2025 iddatransaçãoe61186680202512011244edmz9okmx0q centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastod...
DEBUG: comprovante122025.pdf: DEBUG: Attempting to extract value.
DEBUG: comprovante122025.pdf: DEBUG: Value found via R$: 20
DEBUG: comprovante122025.pdf: DEBUG: Date extracted: 01/12/2025
DEBUG: comprovante122025.pdf: DEBUG: Destinatario found: luizaugustodasilva
DEBUG: comprovante122025.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)(?:\s+da)?\s+transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante122025.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante122025.pdf: DEBUG: General idTransacao match for pattern /transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante122025.pdf: DEBUG: General idTransacao match for pattern /protocolo\s+([a-zA-Z0-9\-]+)/i: null
DEBUG: comprovante122025.pdf: DEBUG: idTransacao after general extraction: null
DEBUG: comprovante122025.pdf: DEBUG: Detectado comprovante do Banco BMG. Iniciando extração específica...
DEBUG: comprovante122025.pdf: DEBUG: dateTimeBmgMatch (BMG): ["01/12/2025às09:45","01/12/2025","09:45"]
DEBUG: comprovante122025.pdf: DEBUG: Data (BMG) encontrada: 01/12/2025
DEBUG: comprovante122025.pdf: DEBUG: Hora (BMG) encontrada: 09:45
DEBUG: comprovante122025.pdf: DEBUG: Banco (BMG) encontrado: Banco BMG
DEBUG: comprovante122025.pdf: DEBUG: pagadorBmgMatch (BMG): ["de sidneiuliana cpf/cnpj","sidneiuliana "]
DEBUG: comprovante122025.pdf: DEBUG: Pagador (BMG) encontrado: sidneiuliana
DEBUG: comprovante122025.pdf: DEBUG: idTransacaoBmgMatch (BMG): ["iddatransaçãoe61186680202512011244edmz9okmx0q","e61186680202512011244edmz9okmx0q"]
DEBUG: comprovante122025.pdf: DEBUG: pixData generated for comprovante122025.pdf: {"valor":20,"destinatario":"luizaugustodasilva","chavePix":"61186680202","data":"01/12/2025","hora":"09:45","idTransacao":"e61186680202512011244edmz9okmx0q","banco":"Banco BMG","tipoChave":"CPF","status":null,"observacoes":"dezembro2025 iddatransaçãoe61186680202512011244edmz9okmx0q centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","pagador":"sidneiuliana","pagadorBanco":null}
DEBUG: comprovante122025.pdf: DEBUG: Antes do bloco de decisão save/update para comprovante122025.pdf.
DEBUG: comprovante122025.pdf: DEBUG: Reached save/update decision for comprovante122025.pdf.
DEBUG: comprovante122025.pdf: DEBUG: isFullyProcessed condition for comprovante122025.pdf: e61186680202512011244edmz9okmx0q
DEBUG: comprovante122025.pdf: DEBUG: pixData.data: 01/12/2025, pixData.valor: 20, pixData.destinatario: luizaugustodasilva, pixData.banco: Banco BMG, pixData.pagador: sidneiuliana, pixData.idTransacao: e61186680202512011244edmz9okmx0q
DEBUG: comprovante122025.pdf: DEBUG: Condição de processamento completo atendida para comprovante122025.pdf.
DEBUG: comprovante122025.pdf: DEBUG: Attempting to save new Pix transaction for comprovante122025.pdf
DEBUG: comprovante122025.pdf: DEBUG: savePixTransaction called.
DEBUG: comprovante122025.pdf: DEBUG: pixData desestruturado com sucesso.
DEBUG: comprovante122025.pdf: DEBUG: savePixTransaction - filename: comprovante122025.pdf
DEBUG: comprovante122025.pdf: DEBUG: savePixTransaction - valor: 20
DEBUG: comprovante122025.pdf: DEBUG: savePixTransaction - destinatario: luizaugustodasilva
DEBUG: comprovante122025.pdf: DEBUG: savePixTransaction - pagador: sidneiuliana
DEBUG: comprovante122025.pdf: DEBUG: tableName determinado como: pix_transactions
DEBUG: comprovante122025.pdf: DEBUG: SQL Query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferencia,
      hora_transferencia, banco, tipo_chave, status, id_transacao,
      observacoes, extracted_text, pagador
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  
DEBUG: comprovante122025.pdf: DEBUG: SQL Values: ["comprovante122025.pdf",20,"luizaugustodasilva","61186680202","2025-12-01","09:45","Banco BMG","CPF",null,"e61186680202512011244edmz9okmx0q","dezembro2025 iddatransaçãoe61186680202512011244edmz9okmx0q centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","\n\nComprovantePix\nR$20,00\n01/12/2025às09:45viaAplicativoBmg\nPara\nLuizAugustodaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nChave\nluizaugustodasilva352@gmail.com\nDe\nSidneiUliana\nCPF/CNPJ***.567.038-**\nAgência44\nConta7974458-6\nInstituiçãoBancoBmgS/A\nDescriçãoDezembro2025\nIDdaTransaçãoE61186680202512011244eDMz9oKMx0q\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044","sidneiuliana"]
DEBUG: comprovante122025.pdf: DEBUG: About to execute SQL query for pix_transactions.
DEBUG: database_query: DEBUG: Query function called with SQL: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc...
DEBUG: database_query: DEBUG: Executing query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc... with params: ["comprovante122025.pdf",20,"luizaugustodasilva","61186680202","2025-12-01","09:45","Banco BMG","CPF...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [{"fieldCount":0,"affectedRows":1,"insertId":38,"info":"","serverStatus":2,"warningStatus":0,"change...
DEBUG: comprovante122025.pdf: DEBUG: Dados salvos no banco para: comprovante122025.pdf
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":38,"filename":"comprovante122025.pdf","valor":"20.00","destinatario":"luizaugustodasilva","c...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":38,"filename":"comprovante122025.pdf","valor":"20.00","destinatario":"luizaugustodasilva","c...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: upload_flow: Arquivo comprovante-112025.pdf recebido em: D:\Sidnei\automatopagamento_back_front\arquivos\comprovante-112025.pdf
DEBUG: process_file_flow: DEBUG: INICIO processFile para: comprovante-112025.pdf
DEBUG: comprovante-112025.pdf: DEBUG: Iniciando processFile para: comprovante-112025.pdf
DEBUG: comprovante-112025.pdf: DEBUG: Antes de verificar existingTransaction para comprovante-112025.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions WHERE filename = ?... with params: ["comprovante-112025.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[],[{"_buf":{"type":"Buffer","data":[1,0,0,1,15,73,0,0,2,3,100,101,102,15,117,108,105,97,110,97,101...
DEBUG: comprovante-112025.pdf: DEBUG: existingTransaction para comprovante-112025.pdf: false
DEBUG: comprovante-112025.pdf: DEBUG: Antes de verificar existingUnprocessedFile para comprovante-112025.pdf.
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?...
DEBUG: database_query: DEBUG: Executing query: SELECT COUNT(*) AS count FROM pix_transactions_no_process WHERE filename = ?... with params: ["comprovante-112025.pdf"]...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"count":0}],[{"_buf":{"type":"Buffer","data":[1,0,0,1,1,27,0,0,2,3,100,101,102,0,0,0,5,99,111,117...
DEBUG: comprovante-112025.pdf: DEBUG: existingUnprocessedFile para comprovante-112025.pdf: false
DEBUG: comprovante-112025.pdf: DEBUG: File extension for comprovante-112025.pdf: .pdf
DEBUG: comprovante-112025.pdf: DEBUG: Calling processPDF for comprovante-112025.pdf
DEBUG: comprovante-112025.pdf: DEBUG: processPDF returned for comprovante-112025.pdf. Extracted text length: 689
DEBUG: comprovante-112025.pdf: DEBUG: extractedText para comprovante-112025.pdf (após extração/recuperação): true
DEBUG: comprovante-112025.pdf: DEBUG: Entering extractedText block for comprovante-112025.pdf.
DEBUG: comprovante-112025.pdf: DEBUG: Texto extraído/recuperado de comprovante-112025.pdf:
{
  "text": "\n\nComprovantedeenvioPix\nValorR$20,00\n05/11/2025às20:01\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescriçãoMensalidade112025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202511052300Psc7FrNf7wP\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044",
  "pages": 1,
  "info": {
    "PDFFormatVersion": "1.7",
    "IsAcroFormPresent": false,
    "IsXFAPresent": false
  }
}...
DEBUG: comprovante-112025.pdf: DEBUG: Calling parsePixData for comprovante-112025.pdf with text length: 525
DEBUG: comprovante-112025.pdf: DEBUG: Normalized Text (start of parsePixData):  comprovantedeenviopix valorr$20,00 05/11/2025às20:01 de sidneiuliana cpf/cnpj***.567.038-** instituiçãobancobmgs/a para luizaugustodasilva cpf/cnpj***.881.268-** instituiçãoitaúunibancos.a. descriçãomensalidade112025 canalaplicativobmg iddatransaçãoe61186680202511052300psc7frnf7wp centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6...
DEBUG: comprovante-112025.pdf: DEBUG: Attempting to extract value.
DEBUG: comprovante-112025.pdf: DEBUG: Value found via R$: 20
DEBUG: comprovante-112025.pdf: DEBUG: Date extracted: 05/11/2025
DEBUG: comprovante-112025.pdf: DEBUG: Destinatario found: luizaugustodasilva
DEBUG: comprovante-112025.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)(?:\s+da)?\s+transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante-112025.pdf: DEBUG: General idTransacao match for pattern /(?:id|1d)\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante-112025.pdf: DEBUG: General idTransacao match for pattern /transa[çc][ãa]o\s+([a-zA-Z0-9]{20,})/i: null
DEBUG: comprovante-112025.pdf: DEBUG: General idTransacao match for pattern /protocolo\s+([a-zA-Z0-9\-]+)/i: null
DEBUG: comprovante-112025.pdf: DEBUG: idTransacao after general extraction: null
DEBUG: comprovante-112025.pdf: DEBUG: Detectado comprovante do Banco BMG. Iniciando extração específica...
DEBUG: comprovante-112025.pdf: DEBUG: Valor (BMG) encontrado: 20
DEBUG: comprovante-112025.pdf: DEBUG: dateTimeBmgMatch (BMG): ["05/11/2025às20:01","05/11/2025","20:01"]
DEBUG: comprovante-112025.pdf: DEBUG: Data (BMG) encontrada: 05/11/2025
DEBUG: comprovante-112025.pdf: DEBUG: Hora (BMG) encontrada: 20:01
DEBUG: comprovante-112025.pdf: DEBUG: Banco (BMG) encontrado: Banco BMG
DEBUG: comprovante-112025.pdf: DEBUG: pagadorBmgMatch (BMG): ["de sidneiuliana cpf/cnpj","sidneiuliana "]
DEBUG: comprovante-112025.pdf: DEBUG: Pagador (BMG) encontrado: sidneiuliana
DEBUG: comprovante-112025.pdf: DEBUG: idTransacaoBmgMatch (BMG): ["iddatransaçãoe61186680202511052300psc7frnf7wp","e61186680202511052300psc7frnf7wp"]
DEBUG: comprovante-112025.pdf: DEBUG: pixData generated for comprovante-112025.pdf: {"valor":20,"destinatario":"luizaugustodasilva","chavePix":"61186680202","data":"05/11/2025","hora":"20:01","idTransacao":"e61186680202511052300psc7frnf7wp","banco":"Banco BMG","tipoChave":"CPF","status":null,"observacoes":"mensalidade112025 canalaplicativobmg iddatransaçãoe61186680202511052300psc7frnf7wp centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","pagador":"sidneiuliana","pagadorBanco":null}
DEBUG: comprovante-112025.pdf: DEBUG: Antes do bloco de decisão save/update para comprovante-112025.pdf.
DEBUG: comprovante-112025.pdf: DEBUG: Reached save/update decision for comprovante-112025.pdf.
DEBUG: comprovante-112025.pdf: DEBUG: isFullyProcessed condition for comprovante-112025.pdf: e61186680202511052300psc7frnf7wp
DEBUG: comprovante-112025.pdf: DEBUG: pixData.data: 05/11/2025, pixData.valor: 20, pixData.destinatario: luizaugustodasilva, pixData.banco: Banco BMG, pixData.pagador: sidneiuliana, pixData.idTransacao: e61186680202511052300psc7frnf7wp
DEBUG: comprovante-112025.pdf: DEBUG: Condição de processamento completo atendida para comprovante-112025.pdf.
DEBUG: comprovante-112025.pdf: DEBUG: Attempting to save new Pix transaction for comprovante-112025.pdf
DEBUG: comprovante-112025.pdf: DEBUG: savePixTransaction called.
DEBUG: comprovante-112025.pdf: DEBUG: pixData desestruturado com sucesso.
DEBUG: comprovante-112025.pdf: DEBUG: savePixTransaction - filename: comprovante-112025.pdf
DEBUG: comprovante-112025.pdf: DEBUG: savePixTransaction - valor: 20
DEBUG: comprovante-112025.pdf: DEBUG: savePixTransaction - destinatario: luizaugustodasilva
DEBUG: comprovante-112025.pdf: DEBUG: savePixTransaction - pagador: sidneiuliana
DEBUG: comprovante-112025.pdf: DEBUG: tableName determinado como: pix_transactions
DEBUG: comprovante-112025.pdf: DEBUG: SQL Query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferencia,
      hora_transferencia, banco, tipo_chave, status, id_transacao,
      observacoes, extracted_text, pagador
    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
  
DEBUG: comprovante-112025.pdf: DEBUG: SQL Values: ["comprovante-112025.pdf",20,"luizaugustodasilva","61186680202","2025-11-05","20:01","Banco BMG","CPF",null,"e61186680202511052300psc7frnf7wp","mensalidade112025 canalaplicativobmg iddatransaçãoe61186680202511052300psc7frnf7wp centralderelacionamento 24horastodososdiasdasemana 08007701790telefonefixo 40027007ligaçõesdecelular sac 24horastodososdiasdasemana 0800979909 atendimentoacessível 24horastodososdiasdasemana 08009797333 ouvidoria 2ªa6ª,das9hàs18h 08007232044","\n\nComprovantedeenvioPix\nValorR$20,00\n05/11/2025às20:01\nDe\nSIDNEIULIANA\nCPF/CNPJ***.567.038-**\nInstituiçãoBancoBmgS/A\nPara\nLuizAugustoDaSilva\nCPF/CNPJ***.881.268-**\nInstituiçãoITAÚUNIBANCOS.A.\nDescriçãoMensalidade112025\nCanalAplicativoBmg\nIDdaTransaçãoE61186680202511052300Psc7FrNf7wP\nCentraldeRelacionamento\n24horastodososdiasdasemana\n08007701790Telefonefixo\n40027007Ligaçõesdecelular\nSAC\n24horastodososdiasdasemana\n0800979909\nAtendimentoacessível\n24horastodososdiasdasemana\n08009797333\nOuvidoria\n2ªa6ª,das9hàs18h\n08007232044","sidneiuliana"]
DEBUG: comprovante-112025.pdf: DEBUG: About to execute SQL query for pix_transactions.
DEBUG: database_query: DEBUG: Query function called with SQL: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc...
DEBUG: database_query: DEBUG: Executing query: 
    INSERT INTO pix_transactions (
      filename, valor, destinatario, chave_pix, data_transferenc... with params: ["comprovante-112025.pdf",20,"luizaugustodasilva","61186680202","2025-11-05","20:01","Banco BMG","CP...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [{"fieldCount":0,"affectedRows":1,"insertId":39,"info":"","serverStatus":2,"warningStatus":0,"change...
DEBUG: comprovante-112025.pdf: DEBUG: Dados salvos no banco para: comprovante-112025.pdf
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":39,"filename":"comprovante-112025.pdf","valor":"20.00","destinatario":"luizaugustodasilva","...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":39,"filename":"comprovante-112025.pdf","valor":"20.00","destinatario":"luizaugustodasilva","...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":39,"filename":"comprovante-112025.pdf","valor":"20.00","destinatario":"luiz augusto da silva...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":39,"filename":"comprovante-112025.pdf","valor":"20.00","destinatario":"luiz augusto da silva...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
DEBUG: database_query: DEBUG: Query function called with SQL: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC...
DEBUG: database_query: DEBUG: Executing query: SELECT * FROM pix_transactions_no_process ORDER BY processed_at DESC... with params: []...
DEBUG: database_query: DEBUG: Query executed successfully. Result: [[{"id":49,"filename":"Imagem do WhatsApp de 2025-12-09 Ã (s) 16.27.21_9dacc5c2.jpg","valor":null,"d...
